<template>
  <div class="background">
    <section id="chip-section">
      <video src="https://www.apple.com/105/media/us/iphone-se/2020/90024c0f-285a-4bf5-af04-2c38de97b06e/anim/arcade-loop/large.mp4"
             muted
             playsinline
             autoplay
             loop></video>
      <h1 ref="text">仿苹果首页滚动动画<br/>不知道写什么好了</h1>
      <div id="the-chip" ref="theChip">
        <svg version="1.1"
             id="text"
             xmlns="http://www.w3.org/2000/svg"
             xmlns:xlink="http://www.w3.org/1999/xlink"
             x="0px"
             y="0px"
             width="1000px"
             height="1000px"
             viewBox="0 0 1000 1000"
             enable-background="new 0 0 1000 1000"
             xml:space="preserve"
             ref="svg">
          <rect class="text-bg" x="78" y="307" width="843" height="387" ref="textBg"/>
          <g class="chip-mask">
            <path d="M655.553,362.302l-17.309,0.532c-2.899,12.131-6.155,23.758-9.764,34.883c0.355,0.298,0.917,0.741,1.687,1.332
c6.271,5.09,10.976,9.084,14.113,11.982C649.783,398.486,653.541,382.243,655.553,362.302z"/>
            <path d="M325.986,394.966c3.136,10.178,8.462,19.704,15.977,28.581c5.503-7.102,10.592-16.629,15.267-28.581H325.986z"/>
            <rect x="512.293" y="382.096" width="39.055" height="14.379" />
            <rect x="512.293" y="355.911" width="39.055" height="12.87" />
            <rect x="512.293" y="330.081" width="39.055" height="12.516" />
            <path d="M967.99,103.946c-0.643-39.99-32.937-72.288-72.925-72.937L893.839,31H104.16l-1.214,0.01
c-39.99,0.642-72.288,32.936-72.937,72.924L30,105.16v789.68l0.01,1.214c0.642,39.99,32.936,72.288,72.924,72.937l1.227,0.01
h789.679l1.215-0.01c39.989-0.642,72.288-32.937,72.936-72.924L968,894.84V105.16L967.99,103.946z M465.428,419.197l18.906,2.84
c2.485,0.415,3.875,1.302,4.172,2.663c0.177,1.302-0.799,2.782-2.93,4.438c-1.42,0.889-2.101,4.173-2.041,9.854v9.408
c-0.297,4.971,2.011,7.455,6.923,7.455c4.971,0.414,10.237,0.622,15.8,0.622c3.904,0,7.869-0.148,11.894-0.443
c12.427,0.532,18.463-7.398,18.107-23.788l4.615,3.639c4.261,2.96,8.965,5.325,14.113,7.101
c-5.74,19.291-17.073,28.61-33.995,27.96c-2.428,0.178-4.853,0.296-7.279,0.354c-1.184,0.059-2.455,0.089-3.816,0.089
c-1.124,0-2.752,0-4.881,0c-3.609,0-6.568-0.03-8.877-0.089c-2.604-0.119-5.268-0.296-7.988-0.532
c-7.931-0.475-13.462-2.219-16.599-5.236c-3.195-2.841-4.763-7.634-4.704-14.379v-12.16
C466.789,434.85,466.316,428.251,465.428,419.197z M491.613,421.149l12.692-9.94c5.738,6.51,12.456,14.676,20.148,24.497
l-13.935,11.983C505.193,437.69,498.891,428.842,491.613,421.149z M542.472,423.547l14.024-10.74
c8.876,11.303,17.959,23.433,27.249,36.392l-14.556,10.296C560.49,445.529,551.583,433.547,542.472,423.547z M494.63,314.992
c0.888,0.06,2.188,0.178,3.905,0.355c8.816,0.829,13.876,1.213,15.178,1.153h36.037c3.314,0,9.853-0.501,19.616-1.509
c-1.065,7.753-1.598,13.64-1.598,17.663V393.9c0,3.787,0.532,9.675,1.598,17.663c-9.113-1.006-15.888-1.509-20.326-1.509h-35.06
c-3.671,0-10.178,0.503-19.527,1.509c1.064-7.336,1.626-13.166,1.686-17.485v-60.89C496.139,328.81,495.636,322.745,494.63,314.992
z M439.954,354.313c-3.315,0-9.144,0.532-17.486,1.598v-16.864c7.22,1.064,13.048,1.597,17.486,1.597h13.225v-15.089
c0-3.728-0.475-10.207-1.42-19.438l17.663,2.929c2.721,0.415,4.261,1.185,4.616,2.309c0.354,1.124-0.533,2.516-2.663,4.172
c-1.479,1.124-2.189,4.469-2.131,10.029v15.089h5.593c4.26,0,10.087-0.532,17.485-1.597v16.864
c-7.043-1.065-12.87-1.598-17.485-1.598h-3.285c6.332,5.147,13.788,12.042,22.368,20.681l-11.096,13.492
c-5.978-7.691-10.504-13.106-13.58-16.243v24.764c0.058,5.623,0.533,12.042,1.42,19.261h-18.905
c0.888-7.158,1.361-13.58,1.42-19.261v-19.615c-4.971,7.337-11.925,16.185-20.858,26.539c-6.391-4.794-12.22-8.078-17.486-9.853
c11.185-6.214,22.457-19.469,33.818-39.765H439.954z M462.587,431.446c-0.177,1.362-1.539,2.427-4.082,3.195
c-1.363,0.414-2.634,1.923-3.817,4.526c-3.609,7.812-8.697,16.895-15.267,27.249c-6.332-2.782-12.99-4.763-19.971-5.946
c11.597-10.771,19.023-24.054,22.278-39.854l17.309,7.278C461.464,428.961,462.646,430.146,462.587,431.446z M259.238,310.11
c14.97,8.641,26.924,16.332,35.859,23.078l-10.208,13.491c-11.006-8.994-22.931-16.716-35.77-23.166L259.238,310.11z
 M244.148,353.515c13.727,8.285,25.444,16.302,35.149,24.054l-10.563,13.58c-11.658-11.064-23.433-19.35-35.327-24.853
L244.148,353.515z M289.416,409.167c-15.8,27.458-26.688,47.931-32.664,61.422c-6.095-4.912-11.748-8.964-16.954-12.16
c15.8-21.537,28.344-43.461,37.635-65.771C282.285,400.705,286.279,406.208,289.416,409.167z M233.748,655.109v-17.191
c7.621,0.792,14.114,1.279,19.479,1.463h74.439c3.352-0.06,10.09-0.488,20.21-1.28v16.826c-7.316-0.791-14.053-1.28-20.21-1.463
h-74.439C249.142,653.587,242.649,654.136,233.748,655.109z M375.036,623.469c-1.038,18.838-1.92,32.404-2.652,40.694
c0.915,14.022-12.772,22.131-41.061,24.325c-0.489-6.524-2.958-13.321-7.407-20.393c9.328,1.219,16.003,1.829,20.027,1.829
c3.841,0.06,6.493-0.764,7.956-2.47c1.522-1.463,2.637-4.694,3.338-9.693c0.7-4.998,1.54-17.617,2.515-37.859h-73.982
c-6.219,0.123-13.077,0.518-20.576,1.188c1.34-6.767,2.226-12.771,2.652-18.016l2.743-34.659c0.122-2.619-0.183-7.986-0.914-16.095
l18.198,2.287c3.352,0.365,5.167,0.914,5.441,1.646s0.411,1.28,0.411,1.646c0,1.221-0.946,2.804-2.834,4.755
c-2.135,1.77-3.201,3.75-3.201,5.944c0,1.646-0.061,2.835-0.183,3.566h62.185c3.78-0.06,9.999-0.549,18.656-1.463v16.644
c-1.463-0.122-3.781-0.334-6.95-0.641c-6.401-0.548-10.121-0.823-11.157-0.823h-63.283l-1.92,20.027h75.902
c5.913-0.183,11.948-0.823,18.106-1.92C375.95,612.769,375.279,619.262,375.036,623.469z M385.644,568.6H365.8
c0.854-7.192,1.372-12.986,1.554-17.376v-5.304H253.501v5.67c0.122,4.45,0.608,10.366,1.463,17.741h-20.209
c0.854-7.865,1.339-13.656,1.463-17.375v-3.933c-0.183-4.694-0.672-10.576-1.463-17.649c6.827,0.793,13.564,1.313,20.209,1.555
h110.104c3.963-0.122,10.821-0.641,20.576-1.555c-0.975,9.389-1.463,15.029-1.463,16.918v3.566
C384.364,555.248,384.851,561.161,385.644,568.6z M392.29,470.412c-19.824-5.504-36.717-13.847-50.682-25.03
c-13.256,10.769-30.149,20.267-50.683,28.491c-3.138-5.268-7.692-10.533-13.669-15.799c21.48-4.083,39.351-11.894,53.611-23.433
c-10-11.597-17.013-24.883-21.037-39.854c-3.55,0.178-7.988,0.857-13.314,2.041v-17.485c0.119,0.06,0.324,0.119,0.622,0.178
c0.296,0.059,0.501,0.119,0.621,0.178c-2.899-3.964-6.51-8.019-10.829-12.161c9.172-4.26,15.267-9.142,18.285-14.645
c3.196-5.148,4.734-13.461,4.615-24.942c-0.12-5.799-0.68-11.508-1.686-17.131c5.503,1.362,13.433,2.102,23.788,2.22h14.557
c9.349-0.118,17.366-0.799,24.054-2.042c-0.83,4.675-1.391,10.621-1.686,17.841c0,0.475-0.031,1.242-0.089,2.308
c-0.297,11.481-0.444,18.463-0.444,20.947c-0.059,3.018,1.567,4.527,4.882,4.527c6.746-0.178,15.414-1.864,26.007-5.06
c-1.54,5.918-2.633,12.16-3.284,18.729c-10.118,0.947-17.13,1.42-21.036,1.42c-8.818,0.06-14.824-1.184-18.019-3.728
c-3.373-2.485-4.941-6.981-4.705-13.491l0.533-27.871h-26.362c0.119,13.788-1.568,24.143-5.059,31.065
c-3.255,7.102-10.119,14.558-20.593,22.368c5.384,0.829,11.508,1.273,18.374,1.331h38.344c9.35-0.118,17.427-0.799,24.232-2.041
c-2.605,5.445-5.415,11.925-8.433,19.438c-4.912,11.599-11.569,23.433-19.971,35.504c15.503,10.416,32.722,16.656,51.659,18.729
C400.868,456.861,396.669,462.659,392.29,470.412z M437.404,692.055c0.608-6.159,1.037-13.475,1.281-21.947v-82.029
c-4.024,5.913-8.841,12.406-14.45,19.479c-6.218-4.938-12.588-8.748-19.112-11.432c20.302-16.46,36.123-41.73,47.462-75.811
l17.74,7.864c3.11,1.404,4.633,2.652,4.573,3.75c0.06,1.038-1.463,2.53-4.573,4.48c-1.279,0.489-3.141,3.109-5.578,7.865
l-9.053,16.46v109.373c0.242,8.901,0.699,16.217,1.372,21.947H437.404z M585.367,598.412c-9.755-0.975-16.521-1.494-20.301-1.555
H533.79v74.805c0.243,8.535,0.7,15.943,1.372,22.222h-19.845c0.731-7.315,1.219-14.723,1.463-22.222v-74.805h-33.378
c-4.695,0.183-11.31,0.701-19.845,1.555v-16.918c8.962,0.854,15.577,1.312,19.845,1.371h33.378v-41.06
c-0.061-4.024-0.548-10.883-1.463-20.576l19.296,2.469c2.926,0.366,4.511,1.129,4.755,2.286c0.243,1.158-0.792,2.743-3.108,4.755
c-1.77,0.976-2.593,4.848-2.47,11.614v40.512h31.276c4.146-0.06,10.912-0.517,20.301-1.371V598.412z M608.243,403.753
c5.206-11.657,9.644-25.178,13.314-40.563l-5.237,0.177c-4.558,0.298-10.149,1.097-16.775,2.397l-0.533-18.019
c6.865,1.007,12.545,1.479,17.043,1.42l8.786-0.178c2.782-13.965,4.763-27.781,5.947-41.451l18.906,4.971
c2.308,0.592,3.476,1.54,3.506,2.841c0.03,1.302-1.08,2.574-3.329,3.816c-1.598,0.71-2.811,3.018-3.638,6.924
c-1.421,7.633-2.989,15.089-4.705,22.367l14.912-0.355c6.509-0.295,12.455-1.034,17.841-2.219
c-3.67,37.635-9.557,62.962-17.664,75.979c3.018,2.961,7.545,7.456,13.58,13.492c3.847,3.848,6.599,6.568,8.255,8.166
l-14.023,13.136c-6.035-8.64-11.599-15.799-16.687-21.479c-11.54,13.787-23.375,25.297-35.504,34.528
c-4.32-5.385-10.062-9.557-17.22-12.516c15.799-7.043,29.614-18.019,41.451-32.93C628.599,416.801,619.192,409.966,608.243,403.753
z M603.475,618.805c27.128-16.399,52.246-47.796,75.353-94.191l17.375,9.511c2.5,1.403,3.628,2.804,3.385,4.206
c-0.366,1.403-2.044,2.501-5.03,3.292c-1.891,0.427-3.598,1.861-5.121,4.298c-20.851,33.897-43.316,62.491-67.398,85.779
C618.806,629.383,612.619,625.084,603.475,618.805z M749.975,690.501c-0.427-0.793-1.099-1.982-2.013-3.567
c-3.779-6.891-6.797-11.979-9.054-15.271c-18.655,1.34-45.814,3.322-81.48,5.943c-5.425,0.306-13.899,1.556-25.422,3.75
c-1.707-5.365-4.908-11.371-9.603-18.016c0.184-0.06,0.518-0.122,1.006-0.183c9.146-1.402,15.241-3.506,18.29-6.311
c31.214-31.458,56.119-64.867,74.714-100.227l17.1,9.967c2.135,1.222,3.049,2.456,2.744,3.704c-0.306,1.25-1.798,2.302-4.48,3.155
c-2.073,0.854-3.872,2.561-5.396,5.121c-14.084,22.496-36.062,50.267-65.936,83.31c21.461-1.036,44.628-2.408,69.502-4.115
c-6.341-9.45-13.23-18.624-20.668-27.525l14.815-10.151c15.119,18.413,29.171,38.166,42.157,59.259L749.975,690.501z
 M766.592,402.599c-6.982-0.768-13.284-1.242-18.906-1.42h-23.078v54.144c0.179,0.888,0.268,1.717,0.268,2.485
c0,9.172-11.836,14.586-35.505,16.243c-0.887-7.515-3.936-14.232-9.142-20.148c13.017,1.539,20.354,2.248,22.012,2.131
c4.438,0.295,6.45-1.51,6.036-5.415v-49.439h-17.664c-4.142,0.119-10.443,0.592-18.905,1.42v-17.042
c8.462,0.947,14.764,1.479,18.905,1.598h17.664v-6.479c-0.177-3.608-0.621-8.521-1.331-14.734
c10.178-10.118,18.609-20.178,25.296-30.179h-41.273c-3.314,0.06-9.173,0.593-17.574,1.599v-16.865
c6.391,0.888,12.249,1.421,17.574,1.598h49.795c3.372-0.058,10.592-0.59,21.657-1.598c-13.847,19.647-26.451,36.362-37.813,50.15
v16.509h22.723c6.568-0.235,12.989-0.768,19.262-1.598V402.599z"/>
          </g>
          <path class="chip" d="M894.28,0c57.804,0,104.772,46.391,105.706,103.972l0.015,1.749v788.56
c0,57.804-46.391,104.771-103.973,105.705L894.28,1000H105.72C47.916,1000,0.948,953.609,0.014,896.028L0,894.28V105.72
C0,47.917,46.391,0.948,103.972,0.014L105.72,0H894.28z M892.997,31H105.002C64.54,31,31.663,63.473,31.01,103.778L31,105.002
v787.996c0,40.461,32.473,73.339,72.778,73.992l1.224,0.01h787.995c40.462,0,73.339-32.473,73.992-72.778l0.011-1.224V105.002
c0-40.461-32.473-73.338-72.779-73.992L892.997,31z"/>
        </svg>
      </div>
    </section>
  </div>
</template>

<script>
export default {
  mounted () {
    window.addEventListener('scroll', (e) => {
      let scrolled = document.documentElement.scrollTop / (document.documentElement.scrollHeight - document.documentElement.clientHeight)
      this.$refs.theChip.style.width = this.$refs.theChip.style.height = document.documentElement.clientWidth * 10 * (scrolled * scrolled * scrolled) + 'px'

      if (scrolled <= 0.1) {
        this.$refs.text.style.opacity = (0.1 - scrolled) / 0.1
        this.$refs.text.style.marginTop = scrolled * 1000 * -1 + 'px'
      } else {
        this.$refs.text.style.opacity = 0
      }

      if (scrolled <= 0.2) {
        this.$refs.svg.style.opacity = (scrolled - 0.1) / 0.1
      } else {
        this.$refs.svg.style.opacity = 1
      }

      if (scrolled >= 0.2) {
        this.$refs.theChip.style.transform = `translate(-50%, ${-50 + scrolled * 10}%)`
      } else {
        this.$refs.theChip.style.transform = `translate(-50%, -50}%)`
      }

      if (scrolled >= 0.5) {
        this.$refs.textBg.style.opacity = (1 - scrolled) / 0.5
        this.$refs.theChip.style.background = 'transparent'
      } else {
        this.$refs.textBg.style.opacity = 1
        this.$refs.theChip.style.background = '#000'
      }

      if (scrolled >= 0.95) {
        this.$refs.theChip.style.opacity = (1 - scrolled) / 0.05
      } else {
        this.$refs.theChip.style.opacity = 1
      }
    })
  }
}
</script>

<style lang="stylus" rel="stylesheet/stylus" scoped>
.background
  background #000
  max-width 100vw !important
  height 3000px
  margin-top -15px
  user-select none
  #chip-section
    position sticky
    top 61px
    width 100%
    height calc(100vh - 61px)
    overflow hidden
    z-index 10
    video
      height calc(100vh - 61px)
      width auto
      position relative
      left 50%
      transform translate(-50%, 0)
    h1
      position absolute
      left 0
      top 50%
      transform translate(0, -50%)
      margin 0
      color #fff
      z-index 20
      font-family Helvetica
      font-size 64px
      letter-spacing -1px
      text-align center
      width 100%
    #the-chip
      position absolute
      top 50%
      left 50%
      transform translate(-50%, -50%)
      width 100px
      height 100px
      min-width 100px
      min-height 100px
      box-shadow 0 0 0 100vw black, 0 0 0 30px black inset
      background #000
      #text
        position absolute
        width 100%
        height 100%
        opacity 0
        .chip
          fill #fff
          stroke-dasharray 100
        .text-bg
          fill #fff
        .chip-mask
          fill #000
</style>
